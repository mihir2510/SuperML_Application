<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script type='text/javascript' src='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js'></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/form.css') }}">


<body class="" style="background-color:#ffd27b">
    <nav class="fixed-top navbar navbar-expand-lg navbar-light bg-light" style="padding:0px 15px 0px 15px;    box-shadow: 0 0 2rem 0 rgb(0 0 0 / 20%);">
        <a class="navbar-brand" style="color: black;text-align: center;font-size: 2.5rem;margin: 15px;" href="/">SUPERML</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav" style="font-size: 1.2rem;">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./#features">Features</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./#team">Our Team</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/documentation">Documentation</a>
                </li>
            </ul>
            <ul class="navbar-nav flex-row ml-auto" style="margin-right: 10px;">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/mihir2510/AutoML_Application">
                        <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" width="25" height="25" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>
                    </a>

                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://pypi.org/project/auto-machine-learning/">
                        <img src="/static/images/python.svg" class="navbar-nav-svg" width="25" height="25" focusable="false">
                    </a>
                </li>
            </ul>
            <a href="/start" class="btn btn-primary" style="margin: 0 10px 10px 0;font-size: 1.2rem !important;">Get Started</a>

        </div>
    </nav>


    {% if message %}
    <div class='d-flex justify-content-around'>
        <div class="alert alert-danger alert-dismissible fade show" role="alert" style="top:115px; position:absolute">
            <strong>Error Occured!</strong> {{message}}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    </div>
    {% endif %}
    <form id="regForm" action="/process-result-gen" method="post" enctype="multipart/form-data" required>
        <div class="row d-flex justify-content-around">
            <div class="col-sm-2 step">
                <span class="">Upload Data</span>
            </div>
            <div class="col-sm-2 step">
                <span class="">Select task</span>
            </div>
            <div class="col-sm-2 step">
                <span class="">Select Methods</span>
            </div>
            <div class="col-sm-2 step">
                <span class="">Select Models </span>
            </div>
            <div class="col-sm-2 step">
                <span class="">Set Variables</span>
            </div>
        </div>
        <!-- One "tab" for each step in the form: -->
        <div class="tab">
            <div class="">
                <div class="text-center">
                    <span> Upload a CSV (comma seperated values) dataset </span><br>
                    <span> Target variable for the dataset is the variable to be predicted/classified </span><br>
                    <br>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-lg-6">
                    <label class="labeller">Select the dataset to upload
                        <a href="#" data-placement="right" data-toggle="tooltip" title="Upload the data to train the model (.csv file expected)"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a>
                    </label>
                    <input type="file" name="dataset" accept=".csv" class="form-control" required>
                </div>

                <div class="form-group col-lg-6">
                    <label for="label" class="labeller"> Enter the target variable for the dataset 
                        <a href="#" data-placement="right" data-toggle="tooltip" title="Enter the name of target column in the dataset"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a></label>
                    <input type="text" class="form-control" name="label" placeholder="" class="form-control" required style="height: 44px;">
                </div>
            </div>

        </div>
        <div class="tab">
            <div class="form-group">
                <p class="labeller">Type of task
                    <a href="#" data-placement="right" data-toggle="tooltip" title="Select the task prediction is for continuous values and classification is for discrete classes"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a>
                </p>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="prediction" name="task" value="prediction" required checked>
                    <label class="form-check-label" for="prediction">Regression</label><br>
                </div>


                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="classification" name="task" value="classification" required>
                    <label class="form-check-label" for="classification">Classification</label><br>
                </div>

            </div>

            <div class="form-group">
                <p class="labeller"> Select Settings
                    <a href="#" data-placement="right" data-toggle="tooltip" title="Selecting custom will let you customize input variables for the pipeline"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a>
                </p>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="default-option" name="settings" value="default" required checked>
                    <label class="form-check-label" for="default-option"> Default </label><br>
                </div>

                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="custom-option" name="settings" value="custom" required>
                    <label class="form-check-label" for="custom-option "> Custom </label>
                </div>
            </div>
        </div>


        <div class="tab">
            <div class="form-group">
                <p class="labeller"> Feature Engineering Methods
                    <a href="#" data-placement="right" data-toggle="tooltip" title="Select Feature Engineering Methods to be used for combinations"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a>
                </p>

                <div>
                    <label class="check"> <input type="checkbox" name="fe_method" value="all_features" checked> <span>All Features</span> </label>
                    <label class="check"> <input type="checkbox" name="fe_method" value="anova"> <span>Anova</span> </label>
                    <label class="check"> <input type="checkbox" name="fe_method" value="pca"> <span>PCA</span> </label>
                    <label class="check"> <input type="checkbox" name="fe_method" value="correlation"> <span>Correlation</span> </label>
                    <label class="check"> <input type="checkbox" name="fe_method" value="select_from_model"> <span>Select From Model</span> </label>
                </div>

            </div>

            <div class="form-group">
                <p class="labeller"> Hyper Parameter Optimization Methods
                    <a href="#" data-placement="right" data-toggle="tooltip" title="Select Hyper Parameter Optimization Methods to be used for combinations"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a>
                </p>

                <div>
                    <label class="check"> <input type="checkbox" name="hpo_method" value="standard" checked> <span> No HPO </span> </label>
                    <label class="check"> <input type="checkbox" name="hpo_method" value="grid_search"> <span>Grid Search</span> </label>
                    <label class="check"> <input type="checkbox" name="hpo_method" value="random_search"> <span>Random Search</span> </label>
                    <label class="check"> <input type="checkbox" name="hpo_method" value="bayesian_tpe"> <span>Bayesian TPE</span> </label>
                </div>
            </div>
        </div>


        <div class="tab">
            <div class="prediction" id="prediction-models">

            </div>
            <div class="classification" id="classification-models">

            </div>
            <br><br>

            <div class="form-group">
                <p class="labeller">Enter metric to use for sorting the results
                    <a href="#" data-placement="right" data-toggle="tooltip" title="Metric to be used for deciding best result"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a>
                </p>
                <div class="prediction prediction-metrics">

                </div>
                <div class="classification classification-metrics">

                </div>
            </div>

        </div>


        <div class="tab">
            <div class="form-group">
                <label for="label" class="labeller"> Enter threshold 
                <a href="#" data-placement="right" data-toggle="tooltip" title="This variable decides the limit of covariance of features with each other"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a>
                </label>
                <input class="form-control" type="text" name="threshold" placeholder="Enter threshold" value="0.9" required>
            </div>

            <div class="form-group">
                <label for="label" class="labeller"> Enter max evals <a href="#" data-placement="right" data-toggle="tooltip" title="Maximum number of iterations to be performed during Hyper Parameter Optimization process"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a></label>
                <input class="form-control" type="text" name="max_evals" placeholder="Enter max evals" value="500" required>
            </div>

            <div class="form-group">
                <label for="label" class="labeller"> Test_size <a href="#" data-placement="right" data-toggle="tooltip" title="Fraction of data to be used for testing purposes"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a></label>
                <input class="form-control" type="text" name="test_size" placeholder="Enter test size" value="0.3" required>
            </div>
        </div>

        <div class="row d-flex justify-content-end">
            <div class="try">
                <button type="button" id="prevBtn" class="button" onclick="nextPrev(-1)">Previous</button>
            </div>
            <div class="change-button">
                <button type="button" id="nextBtn" class="button" onclick="nextPrev(1)">Next</button>
            </div>
        </div>
        <!-- Circles which indicates the steps of the form: -->

    </form>

    <script>
        $(document).ready(function() {
            $('[data-toggle="tooltip"]').tooltip();
        });
        var currentTab = 0; // Current tab is set to be the first tab (0)
        var visited = 0;
        showTab(currentTab); // Display the current tab

        function showTab(n) {
            $(document).ready(function() {
                    $('[data-toggle="tooltip"]').tooltip();
                })
                // This function will display the specified tab of the form...
            var x = document.getElementsByClassName("tab");
            x[n].style.display = "block";
            let defaultSettingRadioBtn = document.getElementById('default-option')
                //... and fix the Previous/Next buttons:
            if (n == 0) {
                document.getElementById("prevBtn").style.display = "none";
            } else {
                document.getElementById("prevBtn").style.display = "inline";
            }


            if (n == (x.length - 1)) {
                var groups = document.getElementsByClassName("change-button");
                console.log(groups);
                groups[0].innerHTML = '<button type="submit" class="button" id="nextBtn" >Submit</button>';
            } else if (n == 1 && defaultSettingRadioBtn.checked) {
                var groups = document.getElementsByClassName("change-button");
                console.log(groups);
                groups[0].innerHTML = '<button type="submit" class="button" id="nextBtn" >Submit</button>';
                visited = 1;
            } else {
                var groups = document.getElementsByClassName("change-button");
                groups[0].innerHTML = '<button type="button" class="button" id="nextBtn"  onclick="nextPrev(1)">Next</button>';
            }
            //... and run a function that will display the correct step indicator:
            fixStepIndicator(n)
        }

        function nextPrev(n) {
            // This function will figure out which tab to display
            var x = document.getElementsByClassName("tab");
            // Exit the function if any field in the current tab is invalid:
            if (n == 1 && !validateForm()) return false;
            // Hide the current tab:
            x[currentTab].style.display = "none";
            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
            // if you have reached the end of the form...
            if (currentTab >= x.length) {
                // ... the form gets submitted:
                document.getElementById("regForm").submit();
                return false;
            }
            // Otherwise, display the correct tab:
            showTab(currentTab);
        }

        function validateForm() {
            // This function deals with validation of the form fields
            var x, y, i, valid = true;
            x = document.getElementsByClassName("tab");
            y = x[currentTab].getElementsByTagName("input");
            // A loop that checks every input field in the current tab:
            for (i = 0; i < y.length; i++) {
                // If a field is empty...
                if (y[i].value == "") {
                    // add an "invalid" class to the field:
                    y[i].classList.add('invalid');
                    // and set the current valid status to false
                    valid = false;
                } else {
                    y[i].classList.remove('invalid');
                    // y[i].className -=" "
                }
            }
            // If the valid status is true, mark the step as finished and valid:
            if (valid) {
                document.getElementsByClassName("step")[currentTab].classList.add('finish');
            }
            return valid; // return the valid status
        }

        function fixStepIndicator(n) {
            // This function removes the "active" class of all steps...
            var i, x = document.getElementsByClassName("step");
            for (i = 0; i < x.length; i++) {
                x[i].classList.remove('active');
            }
            //... and adds the "active" class on the current step:
            x[n].classList.add('active');
        }

        let defaultSettingRadioBtn = document.getElementById('default-option')
        let customSettingRadioBtn = document.getElementById('custom-option')
        let predictionRadioBtn = document.getElementById('prediction')
        let classificationRadioBtn = document.getElementById('classification')


        let predictionModels = [
            'LinearRegression',
            'Lasso',
            'Ridge',
            'DecisionTreeRegressor',
            'RandomForestRegressor',
            'AdaBoostRegressor',
            'ExtraTreesRegressor'
        ]
        let predictionModelNames = {
            'LinearRegression': 'Linear Regression',
            'Lasso': 'Lasso Regression',
            'Ridge': 'Ridge Regression',
            'DecisionTreeRegressor': 'Decision Tree Regression',
            'RandomForestRegressor': 'Random Forest Regression',
            'AdaBoostRegressor': 'AdaBoost Regression',
            'ExtraTreesRegressor': 'Extra Trees Regression'
        }

        let classificationModels = ['LogisticRegression', 'RandomForestClassifier', 'AdaBoostClassifier',
            'GradientBoostingClassifier', 'DecisionTreeClassifier', 'ExtraTreesClassifier'
        ]

        let classificationModelNames = {
            'LogisticRegression': 'Logistic Regression',
            'RandomForestClassifier': 'Random Forest Classifier',
            'AdaBoostClassifier': 'AdaBoost Classifier',
            'GradientBoostingClassifier': 'Gradient Boosting Classifier',
            'DecisionTreeClassifier': 'Decision Tree Classifier',
            'ExtraTreesClassifier': 'Extra Trees Classifier'
        }

        window.addEventListener('load', (e) => {
            document.getElementsByTagName('form')[0].reset();

        })


        defaultSettingRadioBtn.addEventListener('change', (e) => {
            var groups = document.getElementsByClassName("change-button");
            groups[0].innerHTML = '<button type="submit" class="button" id="nextBtn" >Submit</button>';
            console.log(groups);
        })

        customSettingRadioBtn.addEventListener('change', (e) => {
            var groups = document.getElementsByClassName("change-button");
            groups[0].innerHTML = '<button type="button" class="button" id="nextBtn"  onclick="nextPrev(1)">Next</button>';
            console.log(groups);
        })

        let predictionFunc = (e) => {
                // console.log('prediction clicked!');
                // Array.from(document.getElementsByClassName('prediction')).map((elem) => {
                //     // elem.style.display = "block"
                // })
                // Array.from(document.getElementsByClassName('classification')).map((elem) => {
                //     // elem.style.display = "none"
                // })

                Array.from(document.getElementsByClassName('classification-metrics')).map((elem, idx) => {
                    elem.innerHTML = ``
                })
                document.getElementById('classification-models').innerHTML = ``
                    // models change 
                document.getElementById('prediction-models').innerHTML = `
                <div class="form-group">
                <p class="labeller" >Model to be used for generating results <a href="#" data-placement="right" data-toggle="tooltip" title="Algorithms to be trained with combinations of Feature Engineering and Hyper Parameter Optimization methods"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a></p> 
                    ${predictionModels.map((model) => {
                        return `<label class="check"> <input type="checkbox" name="models" value="${model}" checked> <span> ${predictionModelNames[model]} </span> </label>`
                    }).join('\n')}
                </div>
                `
                /*<input type="checkbox" id="ExtraTreesRegressor" name="models" value="ExtraTreesRegressor" class="" checked>
                <label for="ExtraTreesRegressor" class=""> ExtraTreesRegressor </label><br>*/
                // metrics
            let metric = ['', '-sortby']
            Array.from(document.getElementsByClassName('prediction-metrics')).map((elem, idx) => {
                elem.innerHTML = `

                <input type="radio" name="metric${metric[idx]}" id="r2-metric${metric[idx]}" class="" value="r2" required checked>
                <label class="" for="r2-metric${metric[idx]}">R2 score</label><br>
                <input type="radio" name="metric${metric[idx]}" id="rmse-metric${metric[idx]}" class="" value="rmse">
                <label class="" for="rmse-metric${metric[idx]}">RMSE</label><br>
                <input type="radio" name="metric${metric[idx]}" id="mae-metric${metric[idx]}" class="" value="mae">
                <label class="" for="mae-metric${metric[idx]}">MAE</label><br>
                `
            })


        }

        let classificationFunc = (e) => {
                // console.log('classification clicked!');
                // Array.from(document.getElementsByClassName('prediction')).map((elem) => {
                //     elem.style.display = "none"
                // })
                // Array.from(document.getElementsByClassName('classification')).map((elem) => {
                //     elem.style.display = "block"
                // })
                document.getElementById('prediction-models').innerHTML = ``
                Array.from(document.getElementsByClassName('prediction-metrics')).map((elem, idx) => {
                    elem.innerHTML = ``
                })
                document.getElementById('classification-models').innerHTML = `
                    <div class='form-group'>
                    <p class="labeller">Model to be used for generating results <a href="#" data-placement="right" data-toggle="tooltip" title="Algorithms to be trained with combinations of Feature Engineering and Hyper Parameter Optimization methods"><img id="info-base" src={{ url_for( 'static', filename='images/icons/info.svg' ) }} /></a></p> 
                    ${classificationModels.map((model) => {
                        return `<label class="check"> <input type="checkbox" name="models" value="${model}" checked> <span> ${classificationModelNames[model]} </span> </label>`
                    }).join('\n')}
                    </div>
                `

            let metric = ['', '-sortby']
            Array.from(document.getElementsByClassName('classification-metrics')).map((elem, idx) => {
                elem.innerHTML = `
                <input type="radio" name="metric${metric[idx]}" id="accuracy-metric${metric[idx]}" class="" value="accuracy" required checked>
                <label class="" for="accuracy-metric${metric[idx]}">Accuracy</label><br>
                <input type="radio" name="metric${metric[idx]}" id="f1-metric${metric[idx]}" class="" value="f1">
                <label class="" for="f1-metric${metric[idx]}">F1 score</label><br>
                <input type="radio" name="metric${metric[idx]}" id="precision-metric${metric[idx]}" class="" value="precision">
                <label class="" for="precision-metric${metric[idx]}">Precision</label><br>
                <input type="radio" name="metric${metric[idx]}" id="recall-metric${metric[idx]}" class="" value="recall">
                <label class="" for="recall-metric${metric[idx]}">Recall</label><br>
                `
            })


        }


        predictionRadioBtn.addEventListener('change', predictionFunc)

        classificationRadioBtn.addEventListener('change', classificationFunc)

        predictionFunc()
    </script>
    <footer id="footer" style="padding: 10px;
    bottom: 0;
    position:fixed;
    width: 100%; background: #F8F9FA;">
        <div class="container text-center">
            <div class="copyright" style="float: none;">
                &copy; Copyright <strong><span>SuperML</span></strong>. All Rights Reserved
            </div>

        </div>
    </footer>
</body>





</html>